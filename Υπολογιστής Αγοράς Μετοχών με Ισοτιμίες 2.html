<!DOCTYPE html>
<html lang="el">
<head>
<meta charset="UTF-8">
<title>Î¥Ï€Î¿Î»Î¿Î³Î¹ÏƒÏ„Î®Ï‚ Î‘Î³Î¿ÏÎ¬Ï‚ & Î ÏÎ»Î·ÏƒÎ·Ï‚ ÎœÎµÏ„Î¿Ï‡ÏÎ½ Î¼Îµ Î™ÏƒÎ¿Ï„Î¹Î¼Î¯ÎµÏ‚</title>
<style>
body { font-family: Arial,sans-serif; max-width:900px; margin:30px auto; background:#f5f8fb; color:#111; }
.card { background:#fff; padding:20px; border-radius:10px; box-shadow:0 4px 15px rgba(0,0,0,0.08); }
h1 { text-align:center; color:#0b4d8a; }
label { display:block; margin-top:10px; font-weight:600; }
input, select { padding:8px 10px; margin-top:5px; border-radius:6px; border:1px solid #bbb; width:200px; }
button { margin-top:12px; padding:10px 14px; border:none; border-radius:8px; background:#0078d7; color:#fff; cursor:pointer; font-weight:700; }
button:hover { background:#005fa3; }
#result { margin-top:18px; padding:14px; border-radius:8px; background:#eef6ff; white-space:pre-line; font-weight:600; }
#loading { display:none; color:#0078d7; font-style:italic; }
.error { background:#fde6e6; border:1px solid #f5c2c2; padding:10px; border-radius:8px; margin-top:12px; color:#8b1d1d; }
.muted { font-size:0.95rem; color:#555; }
.green { color:green; font-weight:700; }
.red { color:red; font-weight:700; }
</style>
</head>
<body>
<div class="card">
<h1>Î¥Ï€Î¿Î»Î¿Î³Î¹ÏƒÏ„Î®Ï‚ Î‘Î³Î¿ÏÎ¬Ï‚ & Î ÏÎ»Î·ÏƒÎ·Ï‚ ÎœÎµÏ„Î¿Ï‡ÏÎ½</h1>

<label>ÎÏŒÎ¼Î¹ÏƒÎ¼Î± ÎœÎµÏ„Î¿Ï‡Î®Ï‚</label>
<select id="currency">
<option value="EUR">Î•Ï…ÏÏ (â‚¬)</option>
<option value="USD">Î”Î¿Î»Î¬ÏÎ¹Î¿ ($)</option>
<option value="GBP">Î›Î¯ÏÎ± (Â£)</option>
<option value="JPY">Î“Î¹ÎµÎ½ (Â¥)</option>
<option value="CHF">Î•Î»Î²ÎµÏ„Î¹ÎºÏŒ Î¦ÏÎ¬Î³ÎºÎ¿ (CHF)</option>
<option value="AUD">Î”Î¿Î»Î¬ÏÎ¹Î¿ Î‘Ï…ÏƒÏ„ÏÎ±Î»Î¯Î±Ï‚ (AUD)</option>
<option value="CAD">Î”Î¿Î»Î¬ÏÎ¹Î¿ ÎšÎ±Î½Î±Î´Î¬ (CAD)</option>
</select>

<label>Î”Î¹Î±Î¸Î­ÏƒÎ¹Î¼Î¿ ÎšÎµÏ†Î¬Î»Î±Î¹Î¿ (ÏƒÏ„Î¿ Î¯Î´Î¹Î¿ Î½ÏŒÎ¼Î¹ÏƒÎ¼Î±)</label>
<input id="capital" type="number" step="0.01" value="1000" />

<label>Î¤Î¹Î¼Î® ÎœÎµÏ„Î¿Ï‡Î®Ï‚ Î‘Î³Î¿ÏÎ¬Ï‚</label>
<input id="stockPrice" type="number" step="0.01" value="3.5" />

<label>Î ÏÎ¿Î¼Î®Î¸ÎµÎ¹Î± Î±Î½Î¬ ÎµÎ½Ï„Î¿Î»Î®</label>
<input id="orderFee" type="number" step="0.01" value="2.0" />

<label>Î ÏÎ¿Î¼Î®Î¸ÎµÎ¹Î± Î±Î½Î¬ Î¼ÎµÏ„Î¿Ï‡Î®</label>
<input id="shareFee" type="number" step="0.01" value="0.02" />

<label>ÎÏŒÎ¼Î¹ÏƒÎ¼Î± Ï€ÏÎ¿Î¼Î·Î¸ÎµÎ¹ÏÎ½</label>
<select id="feeCurrency">
<option value="EUR">EUR</option>
<option value="same">ÎÏŒÎ¼Î¹ÏƒÎ¼Î± Î±Î³Î¿ÏÎ¬Ï‚</option>
</select>

<div style="margin-top:10px;">
<input type="checkbox" id="autoRate" checked /> <span class="muted">Î§ÏÎ®ÏƒÎ· Î±Ï…Ï„ÏŒÎ¼Î±Ï„Î·Ï‚ Î¹ÏƒÎ¿Ï„Î¹Î¼Î¯Î±Ï‚ (EUR â†’ ÎµÏ€Î¹Î»ÎµÎ³Î¼Î­Î½Î¿ Î½ÏŒÎ¼Î¹ÏƒÎ¼Î±)</span>
</div>

<label>Î§ÎµÎ¹ÏÎ¿ÎºÎ¯Î½Î·Ï„Î· Î¹ÏƒÎ¿Ï„Î¹Î¼Î¯Î± (1 EUR = ? ÎµÏ€Î¹Î»ÎµÎ³Î¼Î­Î½Î¿ Î½ÏŒÎ¼Î¹ÏƒÎ¼Î±)</label>
<input id="manualRate" type="number" step="0.000001" placeholder="Ï€.Ï‡. 1.0874" />

<label>Î¤Î¹Î¼Î® ÎœÎµÏ„Î¿Ï‡Î®Ï‚ Î ÏÎ»Î·ÏƒÎ·Ï‚ (Î³Î¹Î± ÎµÎºÏ„Î¯Î¼Î·ÏƒÎ· ÎºÎ­ÏÎ´Î¿Ï…Ï‚/Î¶Î·Î¼Î¹Î¬Ï‚)</label>
<input id="sellPrice" type="number" step="0.01" placeholder="Ï€.Ï‡. 4.0" />

<div style="margin-top:10px;">
<button id="calcBtn">Î¥Ï€Î¿Î»ÏŒÎ³Î¹ÏƒÎµ</button>
<span id="loading">ğŸ”„ Î¦ÏŒÏÏ„Ï‰ÏƒÎ· Î¹ÏƒÎ¿Ï„Î¹Î¼Î¯Î±Ï‚...</span>
</div>

<div id="errorBox" class="error" style="display:none;"></div>
<div id="result" style="display:none;"></div>
</div>

<script>
const currencySymbols = { EUR:'â‚¬', USD:'$', GBP:'Â£', JPY:'Â¥', CHF:'CHF', AUD:'AUD', CAD:'CAD' };

async function fetchRateEURto(target){
  if(target==='EUR') return 1;
  const url='https://open.er-api.com/v6/latest/EUR';
  const resp=await fetch(url);
  if(!resp.ok) throw new Error('Network error');
  const data=await resp.json();
  if(data.result!=='success') throw new Error('API error');
  const rate=data.rates[target];
  if(!rate) throw new Error('No rate for target');
  return rate;
}

function formatNum(n,d=2){ return isFinite(n)? n.toFixed(d):'â€”'; }

document.getElementById('calcBtn').addEventListener('click',async function(){
  const currency=document.getElementById('currency').value;
  const capital=parseFloat(document.getElementById('capital').value);
  const stockPrice=parseFloat(document.getElementById('stockPrice').value);
  const orderFee=parseFloat(document.getElementById('orderFee').value);
  const shareFee=parseFloat(document.getElementById('shareFee').value);
  const feeCurrency=document.getElementById('feeCurrency').value;
  const sellPrice=parseFloat(document.getElementById('sellPrice').value);
  const useAuto=document.getElementById('autoRate').checked;
  const manualRateVal=parseFloat(document.getElementById('manualRate').value);
  const loading=document.getElementById('loading');
  const errorBox=document.getElementById('errorBox');
  const resultBox=document.getElementById('result');
  errorBox.style.display='none'; resultBox.style.display='none'; errorBox.textContent=''; resultBox.textContent='';

  if(isNaN(capital)||capital<=0||isNaN(stockPrice)||stockPrice<=0){
    errorBox.style.display='block'; errorBox.textContent='âš ï¸ Î•Î¹ÏƒÎ¬Î³ÎµÏ„Îµ Î¸ÎµÏ„Î¹ÎºÏŒ Î´Î¹Î±Î¸Î­ÏƒÎ¹Î¼Î¿ ÎºÎµÏ†Î¬Î»Î±Î¹Î¿ ÎºÎ±Î¹ Ï„Î¹Î¼Î® Î¼ÎµÏ„Î¿Ï‡Î®Ï‚.'; return;
  }
  if(isNaN(orderFee)||orderFee<0||isNaN(shareFee)||shareFee<0){
    errorBox.style.display='block'; errorBox.textContent='âš ï¸ Î•Î¹ÏƒÎ¬Î³ÎµÏ„Îµ Î­Î³ÎºÏ…ÏÎµÏ‚ Ï„Î¹Î¼Î­Ï‚ Ï€ÏÎ¿Î¼Î·Î¸ÎµÎ¹ÏÎ½.'; return;
  }

  let rate=1;
  try{
    if(useAuto){
      loading.style.display='inline';
      rate=await fetchRateEURto(currency);
    } else {
      if(isNaN(manualRateVal)||manualRateVal<=0){
        errorBox.style.display='block'; errorBox.textContent='âš ï¸ Î•Î¹ÏƒÎ¬Î³ÎµÏ„Îµ Î¸ÎµÏ„Î¹ÎºÎ® Ï‡ÎµÎ¹ÏÎ¿ÎºÎ¯Î½Î·Ï„Î· Î¹ÏƒÎ¿Ï„Î¹Î¼Î¯Î±.'; return;
      }
      rate=manualRateVal;
    }
  }catch(err){ loading.style.display='none'; errorBox.style.display='block'; errorBox.textContent='âš ï¸ Î£Ï†Î¬Î»Î¼Î± ÏƒÏ„Î·Î½ Î±Î½Î¬ÎºÏ„Î·ÏƒÎ· Î¹ÏƒÎ¿Ï„Î¹Î¼Î¯Î±Ï‚.'; return; }
  finally{ loading.style.display='none'; }

  let convertedOrderFee = feeCurrency==='EUR'? orderFee*rate : orderFee;
  let convertedShareFee = feeCurrency==='EUR'? shareFee*rate : shareFee;

  let shares=Math.floor((capital-convertedOrderFee)/(stockPrice+convertedShareFee));
  if(shares<1){ resultBox.style.display='block'; resultBox.style.background='#fde6e6'; resultBox.textContent=`âŒ Î¤Î¿ ÎºÎµÏ†Î¬Î»Î±Î¹Î¿ Î´ÎµÎ½ ÎµÏ€Î±ÏÎºÎµÎ¯ Î³Î¹Î± Î±Î³Î¿ÏÎ¬ Î¿ÏÏ„Îµ Î¼Î¹Î±Ï‚ Î¼ÎµÏ„Î¿Ï‡Î®Ï‚ (${currency}).`; return; }

  const totalFees=convertedOrderFee+(shares*convertedShareFee);
  const totalCost=(shares*stockPrice)+totalFees;
  const remaining=capital-totalCost;
  const sym=currencySymbols[currency]||currency;

  let profit=NaN;
  if(!isNaN(sellPrice) && sellPrice>0){
    profit=(shares*sellPrice)-totalCost;
  }

  let out=`ğŸ“Œ Î‘Î ÎŸÎ¤Î•Î›Î•Î£ÎœÎ‘Î¤Î‘ (${currency})\n\n`;
  out+=`Î™ÏƒÎ¿Ï„Î¹Î¼Î¯Î±: 1 EUR = ${formatNum(rate,6)} ${currency}\n\n`;
  out+=`ÎœÏ€Î¿ÏÎµÎ¯Ï„Îµ Î½Î± Î±Î³Î¿ÏÎ¬ÏƒÎµÏ„Îµ: ${shares} Î¼ÎµÏ„Î¿Ï‡Î­Ï‚\n`;
  out+=`Î£ÏÎ½Î¿Î»Î¿ Ï€ÏÎ¿Î¼Î·Î¸ÎµÎ¹ÏÎ½: ${formatNum(totalFees,2)} ${sym}\n`;
  out+=`Î£Ï…Î½Î¿Î»Î¹ÎºÏŒ ÎºÏŒÏƒÏ„Î¿Ï‚ Î±Î³Î¿ÏÎ¬Ï‚: ${formatNum(totalCost,2)} ${sym}\n`;
  out+=`Î¥Ï€ÏŒÎ»Î¿Î¹Ï€Î¿ ÎºÎµÏ†Î±Î»Î±Î¯Î¿Ï…: ${formatNum(remaining,2)} ${sym}\n`;

  if(!isNaN(profit)){
    out+=`\nğŸ’° Î•ÎºÏ„Î¹Î¼ÏÎ¼ÎµÎ½Î¿ ÎºÎ±Î¸Î±ÏÏŒ ÎºÎ­ÏÎ´Î¿Ï‚/Î¶Î·Î¼Î¹Î¬ Ï€ÏÎ»Î·ÏƒÎ·Ï‚: ${formatNum(profit,2)} ${sym}`;
  }

  resultBox.style.display='block';
  if(!isNaN(profit)){
    resultBox.style.background=profit>=0?'#e6ffed':'#fde6e6';
    resultBox.style.color=profit>=0?'green':'red';
  } else {
    resultBox.style.background='#eef6ff'; resultBox.style.color='black';
  }
  resultBox.textContent=out;
});
</script>
</body>
</html>
