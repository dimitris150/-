<!DOCTYPE html>
<html lang="el">
<head>
  <meta charset="UTF-8">
  <title>Î¥Ï€Î¿Î»Î¿Î³Î¹ÏƒÏ„Î®Ï‚ Î‘Î³Î¿ÏÎ¬Ï‚ ÎœÎµÏ„Î¿Ï‡ÏÎ½ Î¼Îµ Î™ÏƒÎ¿Ï„Î¹Î¼Î¯ÎµÏ‚</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      max-width: 700px;
      margin: 40px auto;
      line-height: 1.6;
      color: #111;
      background-color: #f7f9fb;
    }
    h1 { text-align: center; color: #003366; }
    .card {
      border: 1px solid #ccc;
      background: white;
      padding: 24px;
      border-radius: 12px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }
    label { display: block; margin-top: 12px; font-weight: 600; }
    input[type="number"], select {
      width: 160px; padding: 8px; margin-top: 4px;
      border: 1px solid #bbb; border-radius: 6px;
    }
    button {
      margin-top: 18px; padding: 10px 18px;
      border: none; border-radius: 8px;
      background: #0078d7; color: white; font-weight: bold;
      cursor: pointer;
    }
    button:hover { background: #005fa3; }
    #result {
      margin-top: 22px;
      border: 1px solid #ccc;
      border-radius: 8px;
      padding: 16px;
      background: #eef5ff;
      white-space: pre-line;
      font-weight: 600;
    }
    #loading { display: none; color: #0078d7; margin-top: 8px; font-style: italic; }
  </style>
</head>
<body>

  <div class="card">
    <h1>Î¥Ï€Î¿Î»Î¿Î³Î¹ÏƒÏ„Î®Ï‚ Î‘Î³Î¿ÏÎ¬Ï‚ ÎœÎµÏ„Î¿Ï‡ÏÎ½ Î¼Îµ Î™ÏƒÎ¿Ï„Î¹Î¼Î¯ÎµÏ‚</h1>

    <label>Î•Ï€Î¹Î»Î¿Î³Î® ÎÎ¿Î¼Î¯ÏƒÎ¼Î±Ï„Î¿Ï‚</label>
    <select id="currency">
      <option value="EUR">Î•Ï…ÏÏ (EUR)</option>
      <option value="USD">Î”Î¿Î»Î¬ÏÎ¹Î¿ (USD)</option>
      <option value="GBP">Î›Î¯ÏÎ± (GBP)</option>
    </select>

    <label>Î”Î¹Î±Î¸Î­ÏƒÎ¹Î¼Î¿ ÎšÎµÏ†Î¬Î»Î±Î¹Î¿</label>
    <input type="number" id="capital" value="1000" step="0.01">

    <label>Î¤Î¹Î¼Î® ÎœÎµÏ„Î¿Ï‡Î®Ï‚</label>
    <input type="number" id="stockPrice" value="3.50" step="0.01">

    <label>Î ÏÎ¿Î¼Î®Î¸ÎµÎ¹Î± Î•Î½Ï„Î¿Î»Î®Ï‚ (â‚¬)</label>
    <input type="number" id="orderFee" value="2" step="0.01">

    <label>Î ÏÎ¿Î¼Î®Î¸ÎµÎ¹Î± Î‘Î½Î¬ ÎœÎµÏ„Î¿Ï‡Î® (â‚¬)</label>
    <input type="number" id="shareFee" value="0.02" step="0.01">

    <button onclick="calculate()">Î¥Ï€Î¿Î»ÏŒÎ³Î¹ÏƒÎµ</button>
    <div id="loading">ğŸ”„ Î‘Î½Î¬ÎºÏ„Î·ÏƒÎ· Î¹ÏƒÎ¿Ï„Î¹Î¼Î¯Î±Ï‚...</div>

    <div id="result" style="display:none;"></div>
  </div>

  <script>
    async function getExchangeRate(from, to) {
      // Î‘Î½ Î· Î²Î¬ÏƒÎ· ÎºÎ±Î¹ Î¿ ÏƒÏ„ÏŒÏ‡Î¿Ï‚ ÎµÎ¯Î½Î±Î¹ Ï„Î¿ Î¯Î´Î¹Î¿ Î½ÏŒÎ¼Î¹ÏƒÎ¼Î±, ÎµÏ€Î¹ÏƒÏ„ÏÎ­Ï†ÎµÎ¹ 1
      if (from === to) return 1;
      const url = `https://api.exchangerate.host/latest?base=${from}&symbols=${to}`;
      const response = await fetch(url);
      const data = await response.json();
      return data.rates[to];
    }

    async function calculate() {
      const capital = parseFloat(document.getElementById('capital').value);
      const stockPrice = parseFloat(document.getElementById('stockPrice').value);
      const orderFeeEUR = parseFloat(document.getElementById('orderFee').value);
      const shareFeeEUR = parseFloat(document.getElementById('shareFee').value);
      const currency = document.getElementById('currency').value;

      const resultBox = document.getElementById('result');
      const loading = document.getElementById('loading');
      resultBox.style.display = 'none';
      loading.style.display = 'block';

      // Î‘Î½ Ï„Î¿ ÎµÏ€Î¹Î»ÎµÎ³Î¼Î­Î½Î¿ Î½ÏŒÎ¼Î¹ÏƒÎ¼Î± Î´ÎµÎ½ ÎµÎ¯Î½Î±Î¹ ÎµÏ…ÏÏ, Ï†Î­ÏÎ½Î¿Ï…Î¼Îµ Î¹ÏƒÎ¿Ï„Î¹Î¼Î¯Î±
      const rate = await getExchangeRate("EUR", currency);
      loading.style.display = 'none';

      // ÎœÎµÏ„Î±Ï„ÏÎ¿Ï€Î® Ï€ÏÎ¿Î¼Î·Î¸ÎµÎ¹ÏÎ½ ÏƒÏ„Î¿ ÎµÏ€Î¹Î»ÎµÎ³Î¼Î­Î½Î¿ Î½ÏŒÎ¼Î¹ÏƒÎ¼Î±
      const orderFee = orderFeeEUR * rate;
      const shareFee = shareFeeEUR * rate;

      if (isNaN(capital) || isNaN(stockPrice) || capital <= 0 || stockPrice <= 0) {
        resultBox.style.display = 'block';
        resultBox.style.background = '#fde6e6';
        resultBox.textContent = "âš ï¸ Î Î±ÏÎ±ÎºÎ±Î»Ï ÎµÎ¹ÏƒÎ¬Î³ÎµÏ„Îµ Î­Î³ÎºÏ…ÏÎ± Î¸ÎµÏ„Î¹ÎºÎ¬ Ï€Î¿ÏƒÎ¬.";
        return;
      }

      // Î¥Ï€Î¿Î»Î¿Î³Î¹ÏƒÎ¼ÏŒÏ‚ Ï„ÎµÎ¼Î±Ï‡Î¯Ï‰Î½
      let shares = Math.floor((capital - orderFee) / (stockPrice + shareFee));
      if (shares < 1) {
        resultBox.style.display = 'block';
        resultBox.style.background = '#fde6e6';
        resultBox.textContent = "âŒ Î¤Î¿ ÎºÎµÏ†Î¬Î»Î±Î¹Î¿ Î´ÎµÎ½ ÎµÏ€Î±ÏÎºÎµÎ¯ Î³Î¹Î± Î±Î³Î¿ÏÎ¬ Î¿ÏÏ„Îµ Î¼Î¹Î±Ï‚ Î¼ÎµÏ„Î¿Ï‡Î®Ï‚.";
        return;
      }

      const totalFees = orderFee + (shares * shareFee);
      const totalCost = (shares * stockPrice) + totalFees;
      const remaining = capital - totalCost;

      const symbol = currency === 'EUR' ? 'â‚¬' :
                     currency === 'USD' ? '$' :
                     currency === 'GBP' ? 'Â£' : currency;

      let text = `ğŸ“Š Î‘Ï€Î¿Ï„ÎµÎ»Î­ÏƒÎ¼Î±Ï„Î± Î¥Ï€Î¿Î»Î¿Î³Î¹ÏƒÎ¼Î¿Ï (${currency}):\n\n`;
      text += `1 EUR = ${rate.toFixed(4)} ${currency}\n\n`;
      text += `ÎœÏ€Î¿ÏÎµÎ¯Ï„Îµ Î½Î± Î±Î³Î¿ÏÎ¬ÏƒÎµÏ„Îµ: ${shares} Î¼ÎµÏ„Î¿Ï‡Î­Ï‚\n`;
      text += `Î£ÏÎ½Î¿Î»Î¿ Ï€ÏÎ¿Î¼Î·Î¸ÎµÎ¹ÏÎ½: ${totalFees.toFixed(2)} ${symbol}\n`;
      text += `Î£Ï…Î½Î¿Î»Î¹ÎºÏŒ ÎºÏŒÏƒÏ„Î¿Ï‚ Î±Î³Î¿ÏÎ¬Ï‚: ${totalCost.toFixed(2)} ${symbol}\n`;
      text += `Î¥Ï€ÏŒÎ»Î¿Î¹Ï€Î¿ ÎºÎµÏ†Î±Î»Î±Î¯Î¿Ï…: ${remaining.toFixed(2)} ${symbol}`;

      resultBox.style.display = 'block';
      resultBox.style.background = '#e9f5ff';
      resultBox.textContent = text;
    }
  </script>

</body>
</html>
